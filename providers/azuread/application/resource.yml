resource:
  name: "azuread_application"
  enable_variable_comments: false
  var_name: "application"
  required_vars:
    - name: "display_name"
      description: "The display name for the application"
      type: "string"
  optional_vars:
    - name: "api"
      description: "An API block"
      type: "block"
    - name: "app_role"
      description: "A collection of app_role blocks"
      type: "block"
    - name: "description"
      description: "A description of the application, shown to end users"
      type: "string"
    - name: "device_only_auth_enabled"
      description: "Specifies whether this app supports device auth without a user; Default false"
      default_value: false
      type: "boolean"
    - name: "fallback_public_client_enabled"
      description: "Specifies whether the app is a public client; Default false"
      default_value: false
      type: "boolean"
    - name: "feature_tags"
      description: "A feature_tags block, cannot be used with the tags property"
      type: "block"
    - name: "group_membership_claims"
      description: "Configures the groups claim issued in a user or OAuth 2 access token; None, SecurityGroup, DirectoryRole, ApplicationGroup or All"
      type: "list"
    - name: "identifier_uris"
      description: "A set of user-defined URIs that uniquely identify an application within its Azure AD tenant"
      type: "list"
    - name: "logo_image"
      description: "A logo image to upload for the application, as a raw base64-encoded string; GIF, JPEG or PNG format"
      type: "string"
    - name: "marketing_url"
      description: "URL of the applications marketing page"
      type: "string"
    - name: "notes"
      description: "User-specified notes relevant for the management of the application"
      type: "string"
    - name: "oauth2_post_response_required"
      description: "Specifies whether, as part of OAuth 2 token request, AAD allows POST requests [insecure]; Default false"
      default_value: false
      type: "boolean"
    - name: "optional_claims"
      description: "An optional_claims block"
      type: "block"
    - name: "owners"
      description: "A set of object IDs of principals that will be granted ownership of the application"
      default_value: "" 
      type: "list"
    - name: "prevent_duplicate_names"
      description: "If true, will return an error if an existing application is found with the same name; Default false"
      default_value: false
      type: "boolean"
    - name: "privacy_statement_url"
      description: "URL of the applications privacy statement"
      type: "string"
    - name: "public_client"
      description: "A public_client block"
      type: "block"
    - name: "required_resource_access"
      description: "A collection of required_resource_access blocks"
      type: "block"
    - name: "service_management_reference"
      description: "References application context information from a Service or Asset Management DB"
      type: "string"
    - name: "sign_in_audience"
      description: "The Microsoft account types that are supported by the app; AzureADMyOrg, AzureADMultipleOrgs; Default AzureADMyOrg"
      default_value: "AzureADMyOrg"
      type: "string"
    - name: "single_page_application"
      description: "A single_page_application block"
      type: "block"
    - name: "support_url"
      description: "URL of the applications support page"
      type: "string"
    - name: "tags"
      description: "A set of tags to apply to the application"
      type: "list"
    - name: "template_id"
      description: "Unique ID for a templated app in the AAD App Gallery, to create the app from"
      type: "string"
    - name: "terms_of_service_url"
      description: "URL of the application terms of service statement"
      type: "string"
    - name: "web"
      description: "A web block"
      type: "block"

blocks:
  - name: "api"
    required: false
    description: "API Block"
    optional_vars:
      - name: "known_client_applications"
        description: "A set of application IDs [client IDs] used for building consent"
        type: "list"
      - name: "mapped_claims_enabled"
        description: "Allows an application to use claims mapping without specifying a custom signing key; Default false"
        default_value: false
        type: "boolean"
      - name: "oauth2_permission_scope"
        description: "One or more oauth2_permission_scope blocks"
        type: "block"
      - name: "requested_access_token_version"
        description: "The access token version expected by this resource; 1 or 2; Default 1"
        default_value: "1"
        type: "string"
  - name: "oauth2_permission_scope"
    required: false
    description: "OAuth2 Permission Scope Block"
    required_vars:
      - name: "admin_consent_description"
        description: "Delegated permission description that appears in all tenant-wide admin consent experiences"
        type: "string"
      - name: "admin_consent_display_name"
        description: "Display name for the delegated permission"
        type: "string"
      - name: "id"
        description: "The unique identifier of the delegated permission"
        type: "string"
    optional_vars:
      - name: "enabled"
        description: "Determines if the permission scope is enabled; Default true"
        default_value: true
        type: "boolean"
      - name: "type"
        description: "Whether this delegated permission should be considered safe for non-admin users to consent to; User or Admin; Default User"
        default_value: "User"
        type: "string"
      - name: "user_consent_description"
        description: "Delegated permission description that appears in the end user consent experience"
        type: "string"
      - name: "user_consent_display_name"
        description: "Display name for the delegated permission that appears in the end user consent experience"
        type: "string"
      - name: "value"
        description: "The value that is used for the scp claim in the OAuth 2 access token"
        type: "string"
  - name: "app_role"
    required: false
    description: "App Role Block"
    required_vars:
      - name: "allowed_member_types"
        description: "Specify whether this app role definition can be assigned to users and groups; User, Application or Both"
        type: "string"
      - name: "description"
        description: "Description of the app role that appears when the roles is being assigned"
        type: "string"
      - name: "display_name"
        description: "Display name for the app role that appears during app role assignment"
        type: "string"
      - name: "id"
        description: "The unique identifier of the app role"
        type: "string"
    optional_vars:
      - name: "enabled"
        description: "Determines if the app role is enabled; Default true"
        default_value: true
        type: "boolean"
      - name: "value"
        description: "The value that is used for the roles claim in the OAuth 2 access token"
        type: "string"
  - name: "feature_tags"
    required: false
    description: "Feature Tags Block"
    optional_vars:
      - name: "custom_single_sign_on"
        description: "Whether this application represents a custom SAML application for linked service principals; Default false"
        default_value: false
        type: "boolean"
      - name: "enterprise"
        description: "Whether this app represents an Enterprise App for linked service principals; Default false"
        default_value: false
        type: "boolean"
      - name: "gallery"
        description: "Whether this application represents a gallery application for linked service principals; Default false"
        default_value: false
        type: "boolean"
      - name: "hide"
        description: "Whether this app is invisible to users in My Apps and Office 365; Default false"
        default_value: false
        type: "boolean"
  - name: "optional_claims"
    required: false
    description: "Optional Claims Block"
    optional_vars:
      - name: "access_token"
        description: "One or more access_token blocks"
        type: "block"
      - name: "id_token"
        description: "One or more id_token blocks"
        type: "block"
      - name: "saml2_token"
        description: "One or more saml2_token blocks"
        type: "block"
  - name: "access_token"
    required: false
    parent_block: "optional_claims"
    description: "Access Token Block"
    optional_vars:
      - name: "additional_properties"
        description: "List of additional properties of the claim"
        type: "list"
      - name: "essential"
        description: "Whether the claim specified by the client is necessary to ensure a smooth auth experience"
        type: "boolean"
      - name: "name"
        description: "The name of the optional claim"
        type: "string"
      - name: "source"
        description: "The source of the claim; Only known value seems to be user"
        type: "string"
  - name: "id_token"
    required: false
    parent_block: "optional_claims"
    description: "Identity Token Block"
    optional_vars:
      - name: "additional_properties"
        description: "List of additional properties of the claim"
        type: "list"
      - name: "essential"
        description: "Whether the claim specified by the client is necessary to ensure a smooth auth experience"
        type: "boolean"     
      - name: "name"
        description: "The name of the optional claim"
        type: "string"
      - name: "source"
        description: "The source of the claim; Only known value seems to be user"
        type: "string"
  - name: "saml2_token"
    required: false
    parent_block: "optional_claims"
    description: "SAML2 Token Block"
    optional_vars:
      - name: "additional_properties"
        description: "List of additional properties of the claim"
        type: "list"
      - name: "essential"
        description: "Whether the claim specified by the client is necessary to ensure a smooth auth experience"
        type: "boolean"     
      - name: "name"
        description: "The name of the optional claim"
        type: "string"
      - name: "source"
        description: "The source of the claim; Only known value seems to be user"
        type: "string"
  - name: "public_client"
    required: false
    description: "Public Client Block"
    optional_vars:
      - name: "redirect_uris"
        description: "A set of URLs where user tokens are sent for sign-in; https or ms-appx-web URL"
        type: "list"
  - name: "required_resource_access"
    required: false
    description: "Required Resource Block"
    required_vars:
      - name: "resource_access"
        description: "A collection of resource_access blocks"
        type: "block"
      - name: "resource_app_id"
        description: "The unique identifier for the resource that the application requires access to; Should be an application ID"
        type: "string"
  - name: "resource_access"
    required: false
    parent_block: "required_resource_access"
    description: "Resource Access Block"
    required_vars:
      - name: "id"
        description: "The unique identifier for an app role or OAuth2 permission scope"
        type: "string"
      - name: "type"
        description: "Specifies whether the id property references an app role or an OAuth2 permission scope; Role or Scope"
        type: "string"
  - name: "single_page_application"
    required: false
    description: "Single Page Application Block"
    optional_vars:
      - name: "redirect_uris"
        description: "A set of URLs where user tokens are sent for callback; must be https based URL"
        type: "list"
  - name: "web"
    required: false
    description: "Web Block"
    optional_vars:
      - name: "homepage_url"
        description: "Home page or landing page of the application"
        type: "string"
      - name: "implicit_grant"
        description: "An implicit_grant block"
        type: "block"
      - name: "logout_url"
        description: "The URL that will be used by Microsoft's autorization service to perform sign out"
        type: "string"
      - name: "redirect_uris"
        description: "A set of URLS where user tokens are sent for callback; must be http based URL or URN"
        type: "list"
  - name: "implicit_grant"
    required: false
    parent_block: "web"
    description: "Implicit Grant Block"
    optional_vars:
      - name: "access_token_issuance_enabled"
        description: "Whether this web app can request an access token using OAuth2 implicit flow"
        type: "boolean"
      - name: "id_token_issuance_enabled"
        description: "Whether this web app can request ID token using OAuth2 implicit flow"
        type: "boolean"
