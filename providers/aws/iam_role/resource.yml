resource:
  name: "aws_iam_role"
  enable_variable_comments: false
  var_name: "iam_role"
  required_vars:
    - name: "assume_role_policy"
      description: "Policy that grants an entity permission to assume the role"
      type: "string"
  optional_vars:
    - name: "description"
      description: "Description of the role"
      type: "string"
    - name: "force_detach_policies"
      description: "Whether to force detaching any policies the role has before destroying it. Default false"
      default_value: false
      type: "boolean"
    - name: "inline_policy"
      description: "Configuration block defining an exlusive set of IAM inline policies"
      type: "block"
    - name: "managed_policy_arns"
      description: "Set of exclusive IAM managed policy ARNs to attach to the IAM role"
      type: "list"
    - name: "max_session_duration"
      description: "Maximum session duration (in seconds) that you want to set for the role"
      type: "string"
    - name: "name"
      description: "A lovely name for the role"
      type: "string"
    - name: "name_prefix"
      description: "Creates a unique lovely name beinning with this prefix; Don't set name if using this"
      type: "string"
    - name: "path"
      description: "Path to the role"
      type: "string"
    - name: "permissions_boundary"
      description: "ARN of the policy that is used to set the permissions boundary for the role"
      type: "string"
    - name: "tags"
      description: "Key-value mapping of tags for the IAM role"
      type: "list"

blocks:
  - name: "inline_policy"
    required: false
    description: "An Inline Policy Block"
    required_vars:
      - name: "name"
        description: "Name of the role policy"
        type: "string"
      - name: "policy"
        description: "Policy document as a JSON formatted string"
        type: "string"
