resource:
  name: "aws_db_instance"
  enable_variable_comments: false
  var_name: "db_instance"
  required_vars:
    - name: "allocated_storage"
      description: "The allocated storage in gigabytes"
      type: "string"
    - name: "engine"
      description: "The database engine to use;"
      type: "string"
    - name: "instance_class"
      description: "The instance type of the RDS instance"
      type: "string"
    - name: "password"
      description: "Password for the master DB user; This may show up in logs, and will be stored in the DB state file"
      type: "string"
    - name: "username"
      description: "Username for the master DB user; Cannot be specified for a replica"
      type: "string"
  optional_vars:
    - name: "allow_major_version_upgrade"
      description: "Indicates that major version upgrades are allowed"
      type: "boolean"
    - name: "apply_immediately"
      description: "Specifies whether any database modifications are applied immediately; Default false"
      type: "boolean"
    - name: "auto_minor_version_upgrade"
      description: "Indicates That minor engine upgrades will be applied automatically to the DB instance during the maintenance window"
      type: "boolean"
    - name: "availability_zone"
      description: "The AZ for the RDS instance"
      type: "string"
    - name: "backup_retention_period"
      description: "The days to retain backups for; Default is 0"
      type: "string"
    - name: "backup_window"
      description: "The daily time range [in UTC] during which automated backups are created"
      type: "string"
    - name: "blue_green_update"
      description: "Blue / Green deployments block"
      type: "block"
    - name: "ca_cert_identifier"
      description: "The Identifier of the CA certificate for the DB instance"
      type: "string"
    - name: "character_set_name"
      description: "The character set name to use for DB encoding in Oracle and MS SQL instances"
      type: "string"
    - name: "copy_tags_to_snapshot"
      description: "Copy all instance tags to snapshots; Default false"
      type: "boolean"
    - name: "custom_iam_instance_profile"
      description: "The Instance profile associatd with the underlying EC2 instance"
      type: "string"
    - name: "db_name"
      description: "The name of the database to create when the DB instance is created"
      type: "string"
    - name: "db_subnet_group_name"
      description: "Name of DB subnet group, DB instance will be created in the VPC assocaited with the DB subnet group"
      type: "string"
    - name: "delete_automated_backups"
      description: "Specifies whether to remove automate backups immediately after the DB instance is deleted; Default true"
      type: "boolean"
    - name: "deletion_protection"
      description: "If the DB instance should have deletion protection enabled; Default false"
      type: "boolean"
    - name: "domain"
      description: "The ID of the Directory Service Active Directory domain to create the instance in"
      type: "string"
    - name: "domain_iam_role_name"
      description: "The name of the IAM role to be used when making API calls to the Directory Service"
      type: "string"
    - name: "enabled_cloudwatch_logs_exports"
      description: "Set of log types to enable for exporting to CloudWatch logs; audit, error, general, slowquery etc"
      type: "string"
    - name: "engine_version"
      description: "The engine version to use;"
      type: "string"
    - name: "final_snapshot_identifier"
      description: "The name of your final DB snapshot when this DB instance is deleted"
      type: "string"
    - name: "iam_database_authentication_enabled"
      description: "Specifies whether mappings of AWS IAM account to DB accounts is enabled"
      type: "boolean"
    - name: "identifier"
      description: "The name of the RDS instance"
      type: "string"
    - name: "identifier_prefix"
      description: "A unique identifier prefix; Specify identifier or identifier_prefix"
      type: "string"
    - name: "iops"
      description: "The amount of provisioned IOPS"
      type: "string"
    - name: "kms_key_id"
      description: "The ARN for the KMS encryption key"
      type: "string"
    - name: "license_model"
      description: "License model information for this DB instance"
      type: "string"
    - name: "maintenance_window"
      description: "The window to perform maintenance; Format ddd:hh24:mi-ddd:hh24:mi"
      type: "string"
    - name: "max_allocated_storage"
      description: "When configured the upper limite to RDS can automatically scale the storage of the DB instance"
      type: "string"
    - name: "monitoring_interval"
      description: "The interval in seconds between points when Enhanced Monitoring metrics are collected; 0, 1, 5, 10, 15, 30, 60"
      type: "string"
    - name: "monitoring_role_arn"
      description: "The ARN for the IAM role that permits RDS to send enchanced monitoring metrics to CloudWatch Logs"
      type: "string"
    - name: "multi_az"
      description: "Specifies if the RDS instance is multi AZ"
      type: "string"
    - name: "nchar_character_set_name"
      description: "The national character set is used in the NCHAR, NVARCHAR2 and NCLOB data types for Oracle"
      type: "string"
    - name: "network_type"
      description: "The network type of the DB instance; IPV4 or DUAL"
      type: "string"
    - name: "option_group_name"
      description: "Name of the DB option group to associate"
      type: "string"
    - name: "parameter_group_name"
      description: "Name of the DB parameter group to associate"
      type: "string"
    - name: "performance_insights_enabled"
      description: "Specifies whether Performance Insights are enabled; Default false"
      type: "boolean"
    - name: "performance_insights_kms_key_id"
      description: "The ARN for the KMS key to encrypt Performance Insights data"
      type: "string"
    - name: "performance_insights_retention_period"
      description: "Amount of time in days to retain Performance Insights data. 7, 731 or a multiple of 31; Default 7"
      type: "string"
    - name: "port"
      description: "The port on which the DB accepts connections"
      type: "string"
    - name: "publicly_accessible"
      description: "Control is the instance is publicly accessible; Default false"
      type: "boolean"
    - name: "replica_mode"
      description: "Specifies whether the replica is in either mounted or open-read-only mode"
      type: "string"
    - name: "replicate_source_db"
      description: "Specifies that this resource is a replicate database, and to use this value as the source database"
      type: "string"
    - name: "restore_to_point_in_time"
      description: "A config block for restoring a DB instance to a point in time"
      type: "block"
    - name: "s3_import"
      description: "Restore from a Percona Xtrabackup in S3"
      type: "block"
    - name: "skip_final_snapshot"
      description: "Determines whether a final DB snapshot is created before the DB instance is deleted; Default false"
      type: "boolean"
    - name: "snapshot_identifier"
      description: "Specifies whether or not to create this database from a snapshot"
      type: "string"
    - name: "storage_encrypted"
      description: "Specifies whether the DB instance is encrypted; Default false"
      type: "boolean"
    - name: "storage_type"
      description: "One of standard, gp2, gp3 or io1; Default io1 if iops defined or gp2 if not"
      type: "string"
    - name: "storage_throughput"
      description: "The storage throughput value for the DB instance"
      type: "string"
    - name: "timezone"
      description: "Timezone of the DB instance; Only support by MS SQL Server"
      type: "string"
    - name: "vpc_security_group_ids"
      description: "List of VPC security groups to associate"
      type: "list"
    - name: "customer_owned_ip_enabled"
      description: "Indicates whether to enable a customer-owned IP address for an RDS on Outposts DB instance"
      type: "boolean"
    - name: "tags"
      description: "A map of tags to assign to the resource"
      type: "list"

blocks:
  - name: "restore_to_point_in_time"
    required: false
    description: "Restroe To Point In Time Block"
    optional_vars:
      - name: "restore_time"
        description: "The date and time to restore from"
        type: "string"
      - name: "source_db_instance_identifier"
        description: "The identifier of the source DB instance from which to restore"
        type: "string"
      - name: "source_db_instance_automated_backups_arn"
        description: "The ARN of the automated backup from which to restore"
        type: "string"
      - name: "source_dbi_resource_id"
        description: "The Resource ID of the Source DB Instance from which to restore"
        type: "string"
      - name: "use_latest_restorable_time"
        description: "A boolean value that indicates whether the DB instance is restored from the latest backup time; Default false"
        type: "boolean"
  - name: "s3_import"
    required: false
    description: "S3 Import Block"
    required_vars:
      - name: "bucket_name"
        description: "The bucket name where your backup is stored"
        type: "string"
      - name: "ingestion_role"
        description: "Role applied to load the data"
        type: "string"
      - name: "source_engine"
        description: "Source engine for the backup"
        type: "string"
      - name: "source_engine_version"
        description: "Version of the source engine used to make the backup"
        type: "string"
    optional_vars:
      - name: "bucket_prefix"
        description: "The S3 path to your backup"
        type: "string"
  - name: "blue_green_update"
    required: false
    description: "Blue Green Update Block"
    optional_vars:
      - name: "enabled"
        description: "Enables low-downtime updates; Default false"
        type: "boolean"
