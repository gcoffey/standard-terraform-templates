resource:
  name: "aws_cloudfront_distribution"
  enable_variable_comments: false
  var_name: "cloudfront_distribution"
  required_vars:
    - name: "default_cache_behavior"
      description: "Default cache behavior for this distribution. Requires cache_policy_id to be set"
      type: "block"
    - name: "enabled"
      description: "Whether the distribution is enabled to accept end user requests for content"
      type: "boolean"
    - name: "origin"
      description: "One or more origins for this distribution"
      type: "block"
    - name: "restrictions"
      description: "The restriction configuration for this distribution"
      type: "block"
    - name: "viewer_certificate"
      description: "The SSL configuration for this distribution"
      type: "block"
  optional_vars:
    - name: "aliases"
      description: "Extra CNAMEs, if any, for this distribution"
      type: "string"
    - name: "comment"
      description: "Any comments you want to include about the distribution"
      type: "string"
    - name: "custom_error_response"
      description: "One or more custom error response elements"
      type: "block"
    - name: "default_root_object"
      description: "Object that you want CloudFront to return when an end user requests the root URL"
      type: "string"
    - name: "is_ipv6_enabled"
      description: "Whether the IPv6 is enabled for the distribution"
      type: "boolean"
    - name: "http_version"
      description: "Maximum HTTP version to support on the distribution. Allowed values http1.1, http2, http2and3 or http3; Default http2"
      type: "string"
    - name: "logging_config"
      description: "The logging configuration that controls how logs are written to your distribution"
      type: "block"
    - name: "ordered_cache_behavior"
      description: "Ordered list of cache behaviors resource for this distribution"
      type: "list"
    - name: "origin_group"
      description: "One or more origin_group for this distribution"
      type: "block"
    - name: "price_class"
      description: "Price class for this distribution; PriceClass_All, PriceClass_200 or PriceClass_100"
      type: "string"
    - name: "web_acl_id"
      description: "Unique identifier that specifies the AWS WAF Web ACL, if any, to associate with this distribution"
      type: "string"
    - name: "retain_on_delete"
      description: "Disables the distribution instead of deleting it when destroying the resource; Default false"
      type: "boolean"
    - name: "wait_for_deployment"
      description: "If enabled, the resource will wait for the distribution status to change from InProgress to Deployed; Default true"
      type: "boolean"
    - name: "tags"
      description: "A map of tags to assign to the resource; If provider default_tags is set, duplicate keys here will override provider tags"
      type: "list"

blocks:
  - name: "default_cache_behavior"
    required: false
    description: "Cache Behavior Block"
    required_vars:
      - name: "allowed_methods"
        description: "Controls which HTTP methods CloudFront processes and forwards to your Amazon S3 bucket or custom origin"
        type: "string"
      - name: "cached_methods"
        description: "Controls whether CloudFront caches the response to requests using the specified HTTP methods"
        type: "string"
      - name: "path_pattern"
        description: "Pattern that specifies which requests you want this cache behavior to apply to"
        type: "string"
      - name: "target_origin_id"
        description: "Value of ID for the origin that you want CF to route request sto when a request matches the path pattern"
        type: "string"
      - name: "viewer_protocol_policy"
        description: "Specify the protocol policy that users can use to access the files in the origin specified; allow-all, https-only or redirect-to-https"
        type: "string"
    optional_vars:
      - name: "cache_policy_id"
        description: "Unique identifier of the cache policy that is attached to the cache behavior"
        type: "string"
      - name: "compress"
        description: "Whether you want CloudFront to automatically compress content for web request that include Accept-Encoding: gzip; Default false"
        type: "boolean"
      - name: "default_ttl"
        description: "Default amount of time (in seconds) that an object is in a CloudFront cache before CloudFront goes back to the origin"
        type: "string"
      - name: "field_level_encryption_id"
        description: "Field level encryption configuration ID"
        type: "string"
      - name: "lambda_function_association"
        description: "A config block that triggers a lambda function with specific actions"
        type: "block"
      - name: "function_association"
        description: "A config block that triggers a CloudFront function with specific actions"
        type: "block"
      - name: "max_ttl"
        description: "Maximum amount of time (in seconds) that an object is in a CloudFront cache before CF goes back to origin"
        type: "string"
      - name: "min_ttl"
        description: "Minimum amount of time that you want objects to stay in CloudFront caches before CF goes back to origin"
        type: "string"
      - name: "origin_request_policy_id"
        description: "Unique identifier of the origin request policy that is attached to the behavior"
        type: "string"
      - name: "realtime_log_config_arn"
        description: "ARN of the real-time log configuration that is attached to this cache behavior"
        type: "string"
      - name: "response_headers_policy_id"
        description: "Identifier for a response headers policy"
        type: "string"
      - name: "smooth_streaming"
        description: "Indicates whether you want to distribute media files in Microsoft Smooth Streaming format"
        type: "string"
      - name: "trusted_key_groups"
        description: "List of key group IDs that CF can use to validate signed URLs or signed cookies"
        type: "list"
      - name: "trusted_signers"
        description: "List of AWS account IDs that you want to allow to created signed URLs for private content"
        type: "list"
  - name: "lambda_function_association"
    required: false
    parent_block: "default_cache_behavior"
    description: "Lambda Function Association Block"
    required_vars:
      - name: "event_type"
        description: "Specific event to trigger this function; viewer-request, origin-request, viewer-response or origin-response"
        type: "string"
      - name: "lambda_arn"
        description: "ARN of the Lambda function"
        type: "string"
    optional_vars:
      - name: "include_body"
        description: "When set to true it exposes the request body to the lambda function; Default false"
        type: "boolean"
  - name: "function_association"
    required: false
    parent_block: "default_cache_behavior"
    description: "Function Association Block"
    required_vars:
      - name: "event_type"
        description: "Specific event to trigger this function; viewer-request or viewer-response"
        type: "string"
      - name: "function_arn"
        description: "ARN of the CF function"
        type: "string"
  - name: "custom_error_response"
    required: false
    description: "Custom Error Response Block"
    required_vars:
      - name: "error_code"
        description: "4xx or 5xx HTTP status code that you want to customize"
        type: "string"
    optional_vars:
      - name: "error_caching_min_ttl"
        description: "Minimum amount of time you want HTTP error codes to stay in CF caches before CF queries your origin"
        type: "string"
      - name: "response_code"
        description: "HTTP status code that you want CF to return with the custom error page to the viewer"
        type: "string"
      - name: "response_page_path"
        description: "Path of the custom error page"
        type: "string"
  - name: "logging_config"
    required: false
    description: "Logging Config Block"
    required_vars:
      - name: "bucket"
        description: "Amazon S3 bucket to store the access logs in, e.g. <bucketname>.s3.amazonaws.com"
        type: "string"
    optional_vars:
      - name: "include_cookies"
        description: "Whether to include cookies in access logs; Default false"
        type: "string"
      - name: "prefix"
        description: "Prefix to the access log filenames for this distribution"
        type: "string"
  - name: "origin"
    required: false
    description: "Origin Block"
    required_vars:
      - name: "domain_name"
        description: "DNS domain name of either the S3 bucket or website of your custom origin"
        type: "string"
      - name: "origin_id"
        description: "Unique identifier for the origin"
        type: "string"
    optional_vars:
      - name: "connection_attempts"
        description: "Number of times that CF attempts to connect to the origin; Default 3"
        type: "string"
      - name: "connection_timeout"
        description: "Number of seconds that CF waits when trying to establish a connection to the origin; Default 10"
        type: "string"
      - name: "custom_origin_config"
        description: "The CF custom origin config information"
        type: "block"
      - name: "custom_header"
        description: "One or more sub-resources with name and value parameters that specify header data"
        type: "list"
      - name: "origin_access_control_id"
        description: "Unique identifier of a CF origin access control for this origin"
        type: "string"
      - name: "origin_path"
        description: "Optional element that causes CF to request your content from a directory in your S3 bucket"
        type: "string"
      - name: "origin_shield"
        description: "The CF Origin Shield configuration information"
        type: "block"
      - name: "s3_origin_config"
        description: "The CF S3 origin configuration information"
        type: "block"
  - name: "custom_origin_config"
    required: false
    parent_block: "origin"
    description: "Custom Origin Config Block"
    required_vars:
      - name: "http_port"
        description: "HTTP port the custom origin listens on"
        type: "string"
      - name: "https_port"
        description: "HTTPs port the custom origin listens on"
        type: "string"
      - name: "origin_protocol_policy"
        description: "Origin protocol policy to apply to your origin; http-only, https-only or match-viewer"
        type: "string"  
      - name: "origin_ssl_protocols"
        description: "SSL/TLS protocols that you want CF to use; SSLv3, TLSv1, TLSv1.1 or TLSv1.2"
        type: "string"
      - name: "origin_keepalive_timeout"
        description: "Custom KeepAlive timeout in seconds; Limit of 60"
        type: "string"
      - name: "origin_read_timeout"
        description: "The Custom Read timeout, in seconds. Limit of 60"
        type: "string"
  - name: "origin_shield"
    required: false
    parent_block: "origin"
    description: "Origin Shield Config Block"
    required_vars:
      - name: "enabled"
        description: "Whether Origin Shield is enabled"
        type: "boolean"
      - name: "origin_shield_region"
        description: "AWS Region for Origin Shield"
        type: "string"
  - name: "s3_origin_config"
    required: false
    parent_block: "origin"
    description: "S3 Origin Config Block"
    required_vars:
      - name: "origin_access_identity"
        description: "The CF origin access identity to associate with the origin"
        type: "string"
  - name: "origin_group"
    required: false
    description: "Origin Group Config Block"
    required_vars:
      - name: "origin_id"
        description: "Unique Identifier for the origin group"
        type: "string"
      - name: "failover_criteria"
        description: "The failover criteria for when to failover to the secondary origin"
        type: "string"
      - name: "member"
        description: "Ordered member configuration blocks assigned to the origin group, where the first member is the primary origin"
        type: "block"
  - name: "failover_criteria"
    required: false
    parent_block: "origin_group"
    description: "Failover Criteria Block"
    required_vars:
      - name: "status_codes"
        description: "List of HTTP status codes for the origin group"
        type: "string"
  - name: "member"
    required: false
    description: "Member Block"
    required_vars:
      - name: "origin_id"
        description: "Unique Identifier for the member origin"
        type: "string"
  - name: "restrictions"
    required: false
    description: "Restrictions Block"
    required_vars:
      - name: "geo_restriction"
        description: "A Geo-Restriction Block"
        type: "block"
  - name: "geo_restriction"
    required: false
    parent_block: "restrictions"
    description: "A Geo-Restriction Block"
    required_vars:
      - name: "locations"
        description: "ISO-3166-1-alpha-2 codes for which you want CF either to whitelist or blacklist content delivery to"
        type: "list"
      - name: "restriction_type"
        description: "Method that you want to use to restrict distribution of your content by country; none, whitelist or blacklist"
        type: "string"
  - name: "viewer_certificate"
    required: false
    description: "A Viewer Certificate Block"
    required_vars:
      - name: "acm_certificate_arn"
        description: "ARN of the AWS Cert Manager certificate to use with this distribution; ACM cert must be in US-EAST-1"
        type: "string"
      - name: "cloudfront_default_certificate"
        description: "Use as the default certificate when servicing an HTTPs requests"
        type: "boolean"
      - name: "iam_certificate_id"
        description: "IAM certificate identifier of the custom viewer certificate"
        type: "string"
      - name: "minimum_protocol_version"
        description: "Minimum version of the SSL protocol that you want CF to use for HTTPs connections"
        type: "string"
      - name: "ssl_support_method"
        description: "How you want CF to serve HTTPs requests; vip or sni-only"
        type: "string"
