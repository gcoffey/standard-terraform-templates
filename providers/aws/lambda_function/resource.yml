resource:
  name: "aws_lambda_function"
  enable_variable_comments: false
  var_name: "lambda_function"
  required_vars:
    - name: "function_name"
      description: "Unique name for your Lambda function"
      type: "string"
    - name: "role"
      description: "ARN of the functions execution role"
      type: "string"
  optional_vars:
    - name: "architectures"
      description: "Instruction set architecture for your Lambda function; x86_64 or arm64"
      default_value: "x86_64"
      type: "string"
    - name: "code_signing_config_arn"
      description: "To enable code signing for this function specify the ARN of a code-signing config"
      type: "string"
    - name: "dead_letter_config"
      description: "Dead letter config block"
      type: "block"
    - name: "description"
      description: "Description of your Lambda function"
      type: "string"
    - name: "environment"
      description: "An environment configuration block"
      type: "block"
    - name: "ephemeral_storage"
      description: "The amount of ephemeral storage to allocate to the lambda function in MB"
      default_value: "512"
      type: "string"
    - name: "file_system_config"
      description: "A filesystem config block"
      type: "block"
    - name: "filename"
      description: "Path to the functions deployment packages"
      type: "string"
    - name: "handler"
      description: "Function entrypoint in your code"
      type: "string"
    - name: "image_config"
      description: "An image configuration block"
      type: "block"
    - name: "image_uri"
      description: "ECR image URI containing the functions deployment package"
      type: "string"
    - name: "kms_key_arn"
      description: "ARN of the KMS key used to encrypt environment variables"
      type: "string"
    - name: "layers"
      description: "List of lambda layer version ARNS to attach to your lambda function"
      type: "list"
    - name: "memory_size"
      description: "Amount of memory in MB you Lambda function can use at runtime"
      default_value: "128"
      type: "string"
    - name: "package_type"
      description: "ALambda deployment package type; Zip or Image"
      default_value: "Zip"
      type: "string"
    - name: "publish"
      description: "Whether to publish creation/change as new Lambda function Version"
      default_value: false
      type: "boolean"
    - name: "reserved_concurrent_executions"
      description: "Amount of reserved concurrent executions for this Lambda function"
      type: "string"
    - name: "runtime"
      description: "Identifier of the functions runtime"
      type: "string"
    - name: "s3_bucket"
      description: "S3 bucket location containing the function deployment package"
      type: "string"
    - name: "s3_key"
      description: "S3 key of an object containing the functions deployment package"
      type: "string"
    - name: "s3_object_version"
      description: "Object version containing the functions deployment package"
      type: "string"
    - name: "skip_destroy"
      description: "Set to true if you do not wish the function to be deleted at destroy time"
      type: "boolean"
    - name: "source_code_hash"
      description: "Used to trigger updates, must be set to a base64-encoded SHA256 hash of the package file"
      type: "string"
    - name: "snap_start"
      description: "Snap start settings block"
      type: "block"
    - name: "tags"
      description: "A map of tags"
      type: "list"
    - name: "timeout"
      description: "Amount of time your lambda function has to run in seconds"
      default_value: "3"
      type: "string"
    - name: "tracing_config"
      description: "Tracing configuration block"
      type: "block"
    - name: "vpc_config"
      description: "VPC Configuration block"
      type: "block"

blocks:
  - name: "dead_letter_config"
    description: "Dead Letter Configuration block"
    required: false
    required_vars:
      - name: "target_arn"
        description: "ARN of an SNS topic or SQS queue to notify when an invocation fails"
        type: "string"
  - name: "environment"
    description: "Environment configuration block"
    required: false
    optional_vars:
      - name: "variables"
        description: "Map of environment variables that are accessible from the function code during execution"
        type: "list"
  - name: "ephemeral_storage"
    description: "Ephemeral storage block"
    required: false
    required_vars:
      - name: "size"
        description: "The size of the Lambda function ephemeral storage represented in MB"
        default_value: "512"
        type: "string"
  - name: "file_system_config"
    description: "Connection settings for an EFS file system"
    required: false
    required_vars:
      - name: "arn"
        description: "ARN of the EFS Access Point"
        type: "string"
      - name: "local_mount_path"
        description: "Path where the function can access the file system; starting with /mnt/"
        type: "string"
  - name: "image_config"
    description: "Image config block"
    required: false
    optional_vars:
      - name: "command"
        description: "Parameters you want to pass in with entry_point"
        type: "string"
      - name: "entry_point"
        description: "Entry point to your application, typically the location of the runtime executable"
        type: "string"
      - name: "working_directory"
        description: "Working directory"
        type: "string"
  - name: "snap_start"
    description: "A Snap start block"
    required: false
    required_vars:
      - name: "apply_on"
        description: "Conditions where snap start is enabled; Valid values are PublishedVersions"
        default_value: "PublishedVersions"
        type: "string"
  - name: "tracing_config"
    description: "A Tracing config block"
    required: false
    required_vars:
      - name: "mode"
        description: "Whether to sample and trace a subset of incoming requests with AWS X-Ray; PassThrough or Active"
        type: "string"
  - name: "vpc_config"
    description: "A VPC config block"
    required: false
    required_vars:
      - name: "security_group_ids"
        description: "List of security group ids associated with the Lambda function"
        type: "list"
      - name: "subnet_ids"
        description: "List of Subnet IDs associated with the Lambda function"
        type: "list"
