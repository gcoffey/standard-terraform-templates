resource:
  name: "azurerm_api_management_backend"
  enable_variable_comments: false
  var_name: "api_management_backend"
  required_vars:
    - name: "name"
      description: "The name of the API Management backend"
      type: "string"
    - name: "api_management_name"
      description: "The name of the API management service where this backend should be created"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the resource group where the API management service exists"
      type: "string"
    - name: "protocol"
      description: "The protocol used by the backend host; http or soap"
      type: "string"
    - name: "url"
      description: "The URL of the backend host"
      type: "string"
  optional_vars:
    - name: "credentials"
      description: "A credentials block"
      type: "block"
    - name: "description"
      description: "The description of the backend"
      type: "string"
    - name: "proxy"
      description: "A proxy block"
      type: "block"
    - name: "resource_id"
      description: "The management URI of the backend host"
      type: "string"
    - name: "service_fabric_cluster"
      description: "A service fabric cluster blockr"
      type: "block"
    - name: "title"
      description: "The title of the backend"
      type: "string"
    - name: "tls"
      description: "A TLS block"
      type: "string"

blocks:
  - name: "credentials"
    required: false
    description: "A credentials block"
    optional_vars:
      - name: "authorization"
        description: "An authorization block"
        type: "block"
      - name: "certificate"
        description: "A list of client certificate thumbprints to present to the backend"
        type: "string"
      - name: "header"
        description: "A mapping of header parameters to pass to the backend"
        type: "string"
      - name: "query"
        description: "A mapping of query parameters to pass to the backend"
        type: "string"
  - name: "authorization"
    required: false
    parent_block: "credentials" 
    description: "An authorization block"
    optional_vars:
      - name: "parameter"
        description: "The authentication parameter value"
        type: "string"
      - name: "scheme"
        description: "The authentication scheme name"
        type: "string"
  - name: "proxy"
    required: false
    description: "A proxy block"
    required_vars:
      - name: "url"
        description: "The URL of the proxy server"
        type: "string"
      - name: "username"
        description: "The username to connect to the proxy server"
        type: "string"
    optional_vars:
      - name: "password"
        description: "The password to connect to the proxy server"
        type: "string"
  - name: "service_fabric_cluster"
    required: false
    description: "A proxy block"
    required_vars:
      - name: "management_endpoints"
        description: "A list of cluster management endpoints"
        type: "list"
      - name: "max_partition_resolution_retries"
        description: "The maximum number of retries when attempting to resolve the partition"
        type: "string"
    optional_vars:
      - name: "client_certificate_thumbprint"
        description: "The client certificate thumbprint for the management endpoint"
        type: "string"
      - name: "client_certificate_id"
        description: "The client certificate thumbprint for the management endpoint"
        type: "string"
      - name: "server_certificate_thumbprints"
        description: "A list of thumbprints of the server certificates of the Service Fabric cluster"
        type: "list"
      - name: "server_x509_name"
        description: "Server x509 name block"
        type: "block"
  - name: "server_x509_name"
    required: false
    parent_block: "service_fabric_cluster"
    description: "A server x509 name block"
    required_vars:
      - name: "issuer_certificate_thumbprint"
        description: "The thumbprint for the issuer of the certificate"
        type: "string"
      - name: "name"
        description: "The common name of the certificate"
        type: "string"
  - name: "tls"
    required: false
    description: "A TLS block"
    required_vars:
      - name: "validate_certificate_chain"
        description: "Certificate chain to use when validating backend SSL connection"
        type: "string"
      - name: "validate_certificate_name"
        description: "SNI / certificate validation for backend SSL connection"
        type: "string"
