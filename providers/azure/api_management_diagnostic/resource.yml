resource:
  name: "azurerm_api_management_diagnostic"
  enable_variable_comments: false
  var_name: "api_management_diagnostic"
  required_vars:
    - name: "api_management_logger_id"
      description: "The ID of the Diagnostics Logger"
      type: "string"
    - name: "api_management_name"
      description: "The name of the API Management Service Instance"
      type: "string"
    - name: "identifier"
      description: "Identifier of the Diagnostics Logs; applicationinsights, azuremonitor"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the Resource Group where the API Management Service API Diagnostics Logs should exist"
      type: "string"
  optional_vars:
    - name: "always_log_errors"
      description: "Always logs errors"
      type: "boolean"
    - name: "http_correlation_protocol"
      description: "The HTTP correlation Protocol; None, Legacy or W3C"
      type: "string"
    - name: "log_client_ip"
      description: "Log client IP address"
      type: "string"
    - name: "sampling_percentage"
      description: "Sampling percentage; Between 0.0 and 100.0"
      type: "string"
    - name: "verbosity"
      description: "Logging verbosity; verbose, information or error"
      type: "string"
    - name: "operation_name_format"
      description: "The format of the Operation Name for Application Insights; Name or Url"
      type: "string"

blocks:
  - name: "backend_request"
    required: false 
    description: "A backend request block"
    optional_vars:
      - name: "body_bytes"
        description: "Number of payload bytes to log (up to 8192)"
        type: "string"
      - name: "headers_to_log"
        description: "Specifies a list of headers to log"
        type: "string"
      - name: "data_masking"
        description: "A data masking block"
        type: "block"
  - name: "backend_response"
    required: false
    description: "A backend response block"
    optional_vars:
      - name: "body_bytes"
        description: "Number of payload bytes to log (up to 8192)"
        type: "string"
      - name: "headers_to_log"
        description: "Specifies a list of headers to log"
        type: "string"
      - name: "data_masking"
        description: "A data masking block"
        type: "block"
  - name: "frontend_request"
    required: false
    description: "A frontend request block"
    optional_vars:
      - name: "body_bytes"
        description: "Number of payload bytes to log (up to 8192)"
        type: "string"
      - name: "headers_to_log"
        description: "Specifies a list of headers to log"
        type: "string"
      - name: "data_masking"
        description: "A data masking block"
        type: "block"
  - name: "frontend_response"
    required: false
    description: "A frontend response block"
    optional_vars:
      - name: "body_bytes"
        description: "Number of payload bytes to log (up to 8192)"
        type: "string"
      - name: "headers_to_log"
        description: "Specifies a list of headers to log"
        type: "string"
      - name: "data_masking"
        description: "A data masking block"
        type: "block"
  - name: "data_masking"
    required: false
    parent_block: "backend_request"
    description: "A data masking block"
    optional_vars:
      - name: "query_params"
        description: "A query params block"
        type: "block"
      - name: "headers"
        description: "A headers block"
        type: "block"
  - name: "data_masking"
    required: false
    parent_block: "backend_responset"
    description: "A data masking block"
    optional_vars:
      - name: "query_params"
        description: "A query params block"
        type: "block"
      - name: "headers"
        description: "A headers block"
        type: "block"
  - name: "data_masking"
    required: false
    parent_block: "frontend_request"
    description: "A data masking block"
    optional_vars:
      - name: "query_params"
        description: "A query params block"
        type: "block"
      - name: "headers"
        description: "A headers block"
        type: "block"
  - name: "data_masking"
    required: false
    parent_block: "frontend_response"
    description: "A data masking block"
    optional_vars:
      - name: "query_params"
        description: "A query params block"
        type: "block"
      - name: "headers"
        description: "A headers block"
        type: "block"
  - name: "query_params"
    required: false
    parent_block: "data_masking"
    description: "A query params block"
    required_vars:
      - name: "mode"
        description: "The data masking mode; Mask or Hide"
        type: "string"
      - name: "value"
        description: "The name of the query parameter to mask"
        type: "string"
  - name: "headers"
    required: false
    parent_block: "data_masking"
    description: "A frontend response block"
    required_vars:
      - name: "mode"
        description: "The data masking mode; Mask"
        type: "string"
      - name: "value"
        description: "The name of the header to mask"
        type: "string"
