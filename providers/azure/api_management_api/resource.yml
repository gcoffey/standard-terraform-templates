resource:
  name: "azurerm_api_management_api"
  enable_variable_comments: false
  var_name: "api_management_api"
  required_vars:
    - name: "name"
      description: "The name of the API Management API"
      type: "string"
    - name: "api_management_name"
      description: "The name of the API Management Service where this API should be created"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the resource group where the API Management API exists"
      type: "string"
    - name: "revision"
      description: "The revision which is used for this API"
      type: "string"
  optional_vars:
    - name: "api_type"
      description: "Type of API; graphql, http, soap, websocket; Default http"
      type: "string"
    - name: "display_name"
      description: "Display name of the API"
      type: "string"
    - name: "path"
      description: "The relative URL Path for this API Management API"
      type: "string"
    - name: "protocols"
      description: "A list of protocols available to this API; http, https, ws or wss"
      type: "list"
    - name: "description"
      description: "A description of the API Management API"
      type: "string"
    - name: "service_url"
      description: "Absolute URL of the backend service implementing this API"
      type: "string"
    - name: "soap_pass_through"
      description: "Should this API expose a SOAP frontend, rather than HTTP; Default false"
      type: "boolean"
    - name: "subscription_required"
      description: "Should this API require a subscription key; Default true"
      type: "boolean"
    - name: "terms_of_service_url"
      description: "Absolute URL of the Terms of Service"
      type: "string"
    - name: "version"
      description: "Version number of this API"
      type: "string"
    - name: "version_set_id"
      description: "ID of the Version Set the API is associated with"
      type: "string"
    - name: "revision_description"
      description: "Description of the API Revision"
      type: "string"
    - name: "version_description"
      description: "Description of the API Version"
      type: "string"
    - name: "source_api_id"
      description: "API id of the source API e.g. azurerm_api_managemenet_api.example.id"
      type: "string"

blocks:
  - name: "contact"
    required: false 
    description: "A contact info block"
    optional_vars:
      - name: "email"
        description: "Email address of the contact person / org"
        type: "string"
      - name: "name"
        description: "Name of the contact person / org"
        type: "string"
      - name: "url"
        description: "Absolute URL of the contact info"
        type: "string"
  - name: "import"
    required: false
    description: "An import API definition block"
    required_vars:
      - name: "content_format"
        description: "API Definition format; openapi, openapi+json, openapi+json-link, openapi-link, swagger-json, swagger-link-json etc"
        type: "string"
      - name: "content_value"
        description: "Content of the API Definition or URL to API definition"
        type: "string"
    optional_vars:
      - name: "wsdl_selector"
        description: "A WSDL Selector block, to import WSDL content"
        type: "block"
  - name: "license"
    required: false
    description: "A license definition block"
    optional_vars:
      - name: "name"
        description: "Name of the license"
        type: "string"
      - name: "url"
        description: "Absolute URL of the license"
        type: "string"
  - name: "oauth2_authorization"
    required: false
    description: "OAuth2 authoritzation server block"
    required_vars:
      - name: "authorization_server_name"
        description: "OAuth authorization server identifier"
        type: "string"
    optional_vars:
      - name: "scope"
        description: "Operations scope"
        type: "string"
  - name: "openid_authentication"
    required: false
    description: "OpenID authentication server block"
    required_vars:
      - name: "openid_provider_name"
        description: "OpenID Connect provider identifier"
        type: "string"
    optional_vars:
      - name: "bearer_token_sending_methods"
        description: "How to send bearer token to the server; authorizationHeader or query"
        type: "string"
  - name: "subscription_key_parameter_names"
    required: false
    description: "Subscription key parameter query and header setting block"
    required_vars:
      - name: "header"
        description: "The name of the HTTP Header to use for the subscription key"
        type: "string"
      - name: "query"
        description: "The name of the QueryString param for the subscription key"
        type: "string"
  - name: "wsdl_selector"
    required: false
    parent_block: "import"
    description: "Import WSDL"
    required_vars:
      - name: "service_name"
        description: "The name of the service to import"
        type: "string"
      - name: "endpoint_name"
        description: "The name of the endpoint to import"
        type: "string"
