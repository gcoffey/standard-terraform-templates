resource:
  name: "azurerm_app_service_connection"
  enable_variable_comments: false
  var_name: "app_service_connection"
  required_vars:
    - name: "name"
      description: "Specifies the name of the service connection"
      type: "string"
    - name: "app_service_id"
      description: "The ID of the data source web app"
      type: "string"
    - name: "target_resource_id"
      description: "The ID of the target resource; Postgres, PostgresFlexible, Mysql, Sql, Redis, CosmosMongo etc"
      type: "string"
    - name: "authentication"
      description: "The authentication info block"
      type: "block"

blocks:
  - name: "authentication"
    required: true
    description: "Authentication info"
    required_vars:
      - name: "type"
        description: "The authentication type; systemAssignedIdentity, userAssignedIdentity, servicePrincipalSecret etc"
        type: "string"
    optional_vars:
      - name: "name"
        description: "Username or account name for secret auth"
        type: "string"
      - name: "secret"
        description: "Password or account key for secret auth"
        type: "string"
      - name: "client_id"
        description: "Client ID for userAssignedIdentity or servicePrincipal auth"
        type: "string"
      - name: "subscription_id"
        description: "Subscription ID for userAssignedIdentity"
        type: "string"
      - name: "principal_id"
        description: "Pincipal ID for servicePrincipal auth"
        type: "string"
      - name: "certificate"
        description: "Service principal certificate for servicePrincipal auth"
        type: "string"
      - name: "client_type"
        description: "The application client type; none, dotnet, java, python, go, php, ruby, django, nodejs or springBoot"
        type: "string"
      - name: "vnet_solution"
        description: "The type of VNet solution; serviceEndpoint or privateLink"
        type: "string"
      - name: "secret_store"
        description: "An option to store secret value in secure place"
        type: "block"
  - name: "secret_store"
    required: false
    parent_block: "authentication"
    required_vars:
      - name: "key_vault_id"
        description: "The key vault id to store secret"
        type: "string"
