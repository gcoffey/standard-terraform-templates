resource:
  name: "azurerm_key_vault"
  enable_variable_comments: false
  var_name: "key_vault"
  required_vars:
    - name: "location"
      description: "Specifies the supported Azure location where the resource exists"
      type: "string"
    - name: "name"
      description: "The name of the Key Vault to create"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the resource group in which to create the Key Vault"
      type: "string"
    - name: "sku_name"
      description: "The Name of the SKU used for this Key Vault; standard or premium"
      type: "string"
    - name: "tenant_id"
      description: "The Azure Active Directory tenante ID that should be used for authenticating requests to the key vault"
      type: "string"
    - name: "access_policy"
      description: "A list of up to 1024 objects describing access policies"
      type: "block"
    - name: "enabled_for_deployment"
      description: "Allow Virtual Machines to retrieve certificates store as secrets"
      type: "boolean"
    - name: "enabled_for_disk_encryption"
      description: "Allow Disk Encryption to retrieve secrets from the vault and unwrap keys"
      type: "boolean"
    - name: "enabled_for_template_deployment"
      description: "Allow Resource Manager to retrieve secrets from the key vault"
      type: "boolean"
    - name: "enabled_rbac_authorization"
      description: "Whether Key Vault uses RBAC for authorization of data actions"
      type: "boolean"
    - name: "network_acls"
      description: "Network ACL block"
      type: "block"
    - name: "purge_protection_enabled"
      description: "Is Purge Protection enabled for this Key Vault"
      type: "boolean"
    - name: "public_network_access_enabled"
      description: "Whether public network access is allowed for this Key Vault; Default true"
      type: "boolean"
    - name: "soft_delete_retention_days"
      description: "The number of days that items should be retained for once soft-deleted; between 7 and 90"
      type: "string"
    - name: "contact"
      description: "Contact Block"
      type: "block"
    - name: "tags"
      description: "A mapping of tags"
      type: "list"

blocks:
  - name: "access_policy"
    required: false
    description: "Access Policy Block"
    required_vars:
      - name: "tenant_id"
        description: "The Azure AD tenant ID that should be used for authenticating requests"
        type: "string"
      - name: "object_id"
        description: "The Object ID of a user, service principal or security group in the Azure AD tenant for the vault"
        type: "string"
    optional_vars:
      - name: "application_id"
        description: "The object ID of an Application in Azure AD"
        type: "string"
      - name: "certificate_permissions"
        description: "List of certificate permissions; Backup, Create, Delete, DeleteIssuers, Get, GetISsuers, Import, List, ListIssuers etc"
        type: "string"
      - name: "key_permissions"
        description: "List of key permissions; Backup, Create, Decrypt, Delete, Encrypt, Get, Import, List, Purge, Recover etc"
        type: "string"
      - name: "secret_permissions"
        description: "List of secret permissions; Backup, Delete, Get, List, Purge, Recover, Restore or Set"
        type: "string"
      - name: "storage_permissions"
        description: "List of storage permissions; Backup, Delete, DeleteSAS, Get, GetSAS, List, ListSAS, Purge, Recover etc"
        type: "string"
  - name: "network_acls"
    required: false
    description: "Network ACL Block"
    required_vars:
      - name: "bypass"
        description: "Specifies which traffic can bypass the network rules; AzureServices or None"
        type: "string"
      - name: "default_action"
        description: "The Default ACtion to use when no rules match from ip_rules / virtual_network_subnet_ids; Allow or Deny"
        type: "string"
    optional_vars:
      - name: "ip_rules"
        description: "One or more IP addresses or CIDR blocks"
        type: "list"
      - name: "virtual_network_subnet_ids"
        description: "One or more Subnet IDs which should be able to access this Key Vault"
        type: "list"
  - name: "contact"
    required: false
    description: "Contact Block"
    required_vars:
      - name: "email"
        description: "Email address of the contact"
        type: "string"
    optional_vars:
      - name: "name"
        description: "Name of the contact"
        type: "string"
      - name: "phone"
        description: "Phone number of the contact"
        type: "string"
