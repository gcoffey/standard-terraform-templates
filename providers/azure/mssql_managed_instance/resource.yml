resource:
  name: "azurerm_mssql_managed_server"
  enable_variable_comments: false
  var_name: "mssql_managed_server"
  required_vars:
    - name: "administrator_login"
      description: "The administrator login name for the SQL managed instance"
      type: "string"
    - name: "administrator_login_password"
      description: "The password associated with the administrator_login user"
      type: "string"
    - name: "license_type"
      description: "What type of license the instance will use; LicenseIncluded or BasePrice"
      type: "string"
    - name: "location"
      description: "An Azure location to deploy the resource"
      type: "string"
    - name: "name"
      description: "The name of the SQL managed instance"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the resource group to create the SQL Managed Instance"
      type: "string"
    - name: "sku_name"
      description: "Specifies the SKU name for the instance; GP_Gen4, GP_Gen5, GP_Gen8IM, GP_Gen8IH etc"
      type: "string"
    - name: "storage_size_in_gb"
      description: "Maximum storage space for the SQL instance; should be in multiples of 32 GB"
      type: "string"
    - name: "subnet_id"
      description: "The subnet the SQL managed instance will reside in"
      type: "string"
    - name: "vcores"
      description: "Number of cores that should be assigned; 8, 16 or 24 for Gen4, 4, 8, 16, 24, 32, 40 etc for Gen5"
      type: "string"
  optional_vars:
    - name: "collation"
      description: "Specifies how the SQL Managed Instance will be collated; Default SQL_Latin1_General_CP1_CI_AS"
      default_value: "SQL_Latin1_General_CP1_CI_AS"
      type: "string"
    - name: "dns_zone_partner_id"
      description: "The ID of the SQL managed instance which will share the DNS zone"
      type: "string"
    - name: "identity"
      description: "An Identity block"
      type: "block"
    - name: "maintenance_configuration_name"
      description: "The Rname of the Public Maintenance Configuration window to apply; SQL_Default, SQL_EastUS_MI_1"
      default_value: "SQL_Default"
      type: "string"
    - name: "minimum_tls_versrion"
      description: "The minimum TLS version to use; 1.0, 1.1 or 1.2"
      default_value: "1.2"
      type: "string"
    - name: "proxy_override"
      description: "Specifies how the SQL Managed Instance will be accessed; Default, Proxy or Redirect"
      default_value: "Default"
      type: "string"
    - name: "public_data_endpoint_enabled"
      description: "Is the public data endpoint enabled?"
      default_value: false
      type: "boolean"
    - name: "storage_account_type"
      description: "Specifies the storage account type used to store backups; GRS, LRS or ZRS"
      default_value: "GRS"
      type: "string"
    - name: "tags"
      description: "A mapping of tags"
      type: "list"
    - name: "timezone_id"
      description: "The TimeZone ID that the SQL Managed Instance will be operating in; Default is UTC"
      default_value: "UTC"
      type: "string"

blocks:
  - name: "identity"
    required: false
    description: "An identity block"
    required_vars:
      - name: "type"
        description: "Specifies the type of Managed Service Identity that should be used; SystemAssigned or UserAssigned"
        type: "string"
    optional_vars:
      - name: "identity_ids"
        description: "Specifies a list of User Assigned Managed Identity IDs; required when type is UserAssigned"
        type: "list"
