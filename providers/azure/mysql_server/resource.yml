resource:
  name: "azurerm_mysql_server"
  enable_variable_comments: false
  var_name: "mysql_server"
  required_vars:
    - name: "name"
      description: "Specifies the name of the MySQL Server"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the Resource group in which the MySQL Server should be created"
      type: "string"
    - name: "location"
      description: "Specifies the supported Azure location where the resource exists"
      type: "string"
    - name: "sku_name"
      description: "Specifies the SKU name; B_Gen4_1, B_Gen4_2, B_Gen5_1, B_Gen5_2, GP_Gen4_2, GP_Gen4_4 etc"
      type: "string"
    - name: "version"
      description: "Specifies the version of MySQL to use; 5.8 or 8.0"
      type: "string"
  optional_vars:
    - name: "administrator_login"
      description: "The Administrator login for the MySQL Server; Required when create_mode = Default"
      type: "string"
    - name: "administrator_login_password"
      description: "The password associated with the administrator_login; Required when create_mode = Default"
      type: "string"
    - name: "auto_grow_enabled"
      description: "Enable/Disable auto-growing of the storage; Default true"
      type: "boolean"
    - name: "backup_retention_days"
      description: "Backup retention days for the server; between 7 and 35"
      type: "string"
    - name: "create_mode"
      description: "The creation mode; Default, Replica, GeoRestor or PointInTimeRestore; Default is Default"
      type: "string"
    - name: "creation_source_server_id"
      description: "For creation modes other than Default, the source server ID to use"
      type: "string"
    - name: "geo_redundant_backup_enabled"
      description: "Turn Geo-redundant server backups on/off"
      type: "boolean"
    - name: "identity"
      description: "An Identity Block"
      type: "block"
    - name: "infrastructure_encryption_enabled"
      description: "Whether or not infrastructure is encrypted for this server"
      type: "boolean"
    - name: "public_network_access_enabled"
      description: "Whether or not public network access is allowed; Default true"
      type: "boolean"
    - name: "restore_point_in_time"
      description: "When create_mode = PointInTimeRestore, specifies the point in time to restore from; RFC3339 format"
      type: "string"
    - name: "ssl_enforcement_enabled"
      description: "Specifies if SSL should be enforced on connections; true, false"
      type: "boolean"
    - name: "ssl_minimal_tls_version_enforced"
      description: "The minimum TLS version to support; TLSEnforcementDisable, TLS1_0, TLS1_1 or TLS1_2; Default TLS1_2"
      type: "string"
    - name: "storage_mb"
      description: "Max storage allowed for a server; between 5120 and 1048576"
      type: "string"
    - name: "threat_detection_policy"
      description: "Threat detection policy configuration, known in the API as Server Security Alerts Policy"
      type: "block"
    - name: "tags"
      description: "A mapping of tags"
      type: "list"

blocks:
  - name: "identity"
    required: false
    description: "Identity Block"
    required_vars:
      - name: "type"
        description: "Specifies the type of Managed Service Identity; SystemAssigned"
        type: "string"
  - name: "threat_detection_policy"
    required: false
    description: "Threat Detection Policy Block"
    optional_vars:
      - name: "enabled"
        description: "Is the polict enabled?"
        type: "boolean"
      - name: "disabled_alerts"
        description: "Specifies a list of alerts which should be disabled; Sql_Injection, Sql_Injection_Vulnerability, Access_Anomaly etc"
        type: "string"
      - name: "email_account_admins"
        description: "A list of email addresses which alerts should be sent to"
        type: "list"
      - name: "retention_days"
        description: "Specifies the number of days to keep in the Threat Detection audit logs"
        type: "string"
      - name: "storage_account_access_key"
        description: "Specifies the identifier key of the Threat Detection audit storage account"
        type: "string"
      - name: "storage_endpoint"
        description: "Specifies the blob storage endpoint"
        type: "string"
