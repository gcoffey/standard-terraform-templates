resource:
  name: "azurerm_key_vault_key"
  enable_variable_comments: false
  var_name: "key_vault_key"
  required_vars:
    - name: "key_vault_id"
      description: "The ID of the Key Vault where the Key should be created"
      type: "string"
    - name: "name"
      description: "The name of the Key Vault Key to create"
      type: "string"
    - name: "key_type"
      description: "Specifies the Key Type to use for this Key Vault Key; EC, EC-HSM, RSA or RSA-HSM"
      type: "string"
  optional_vars:
    - name: "curve"
      description: "Specifies the curve to use when creating an EC key; P-256, P-256K, P-384 or P-521; Default P-256"
      type: "string"
    - name: "key_opts"
      description: "A list of JSON web key operations; decrypt, encrypt, sign, unwrapKey, verify or wrapKey"
      type: "string"
    - name: "not_before_date"
      description: "Key not usable before the provided UTC datetime (Y-m-d'T'H:M:S'Z')"
      type: "string"
    - name: "expiration_date"
      description: "Expiration UTC datetime (Y-m-d'T'H:M:S'Z')"
      type: "string"
    - name: "rotation_policy"
      description: "Rotation Policy Block"
      type: "block"
    - name: "tags"
      description: "A mapping of tags"
      type: "list"

blocks:
  - name: "rotation_policy"
    required: false
    description: "Rotation Policy Block"
    optional_vars:
      - name: "expire_after"
        description: "Expire a Key Vault KEy after given duration as an ISO 8601 duration"
        type: "string"
      - name: "automatic"
        description: "Automatic Block"
        type: "block"
      - name: "notify_before_expiry"
        description: "Notify at a given duration before expiry as an ISO 8601 duration; Default P30D"
        type: "string"
  - name: "automatic"
    required: false
    parent_block: "rotation_policy"
    description: "Automatic Block"
    optional_vars:
      - name: "time_after_creation"
        description: "Rotate automatically at a duration after create as an ISO 8601 duration"
        type: "string"
      - name: "time_before_expiry"
        description: "Rotate automatically at a duration before expiry as an ISO 8601 duration"
        type: "string"
