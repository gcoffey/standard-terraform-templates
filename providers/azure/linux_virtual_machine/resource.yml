resource:
  name: "azurerm_linux_virtual_machine"
  enable_variable_comments: false
  var_name: "linux_virtual_machine"
  required_vars:
    - name: "name"
      description: "The name of the Linux Virtual Machine"
      type: "string"
    - name: "location"
      description: "Specifies the supported Azure location where the resource should be created"
      type: "string"
    - name: "resource_group_name"
      description: "The name of the Resource Group in which the Linux VM should exist"
      type: "string"
    - name: "admin_username"
      description: "The username of the local administrator on each VM instance"
      type: "string"
    - name: "size"
      description: "The SKU for the VM, such as Standard_F2"
      type: "string"
    - name: "network_interface_ids"
      description: "A list of network interface ids to attach to this VM"
      type: "list"
    - name: "os_disk"
      description: "An os disk block"
      type: "block"
  optional_vars:
    - name: "license_type"
      description: "Specifies the BYOL Type for this VM; RHEL_BYOS or SLES_BYOS"
      type: "string"
    - name: "admin_password"
      description: "The password which should be used for the local administrator on this VM"
      type: "string"
    - name: "additional_capabilities"
      description: "An additional capabilities block"
      type: "block"
    - name: "admin_ssh_key"
      description: "One or more Admin SSH Key blocks"
      type: "block"
    - name: "allow_extension_operations"
      description: "Should extension operations be allowed on this VM; Default true"
      default_value: true
      type: "boolean"
    - name: "availability_set_id"
      description: "Specifies the ID of the Availability Set in which the VM should exist"
      type: "string"
    - name: "boot_diagnostics"
      description: "A boot diagnostics block"
      type: "block"
    - name: "capacity_reservation_group_id"
      description: "Specifies the ID of the Capacity Reservation Group which the VM Scale Set should be allocated to"
      type: "string"
    - name: "computer_name"
      description: "Specifies the Hostname which should be used for this VM"
      type: "string"
    - name: "custom_data"
      description: "The Base64-Encoded Custom Data which should be used for this VM"
      type: "string"
    - name: "dedicated_host_id"
      description: "The ID of a Dedicated Host where this machine should be run"
      type: "string"
    - name: "dedicated_host_group_id"
      description: "The ID of a Dedicated Host GRoup that this Linux VM should be run within"
      type: "string"
    - name: "disable_password_authentication"
      description: "Should Password Auth be disabled on this VM Scale Set; Default true"
      default_value: true
      type: "boolean"
    - name: "edge_zone"
      description: "Specifies the Edge Zone within the Azure Region where this VM should exist"
      type: "string"
    - name: "encryption_at_host_enabled"
      description: "Should all of the disks attached to this VM be encrypted"
      type: "boolean"
    - name: "allow_extension_operations"
      description: "Should extension operations be allowed on the VM Scale Set; Default true"
      default_value: true
      type: "boolean"
    - name: "extensions_time_budget"
      description: "Specifies the duration allocated for all extensions to start; between 15 and 120 mins; Default PT1H30M [90mins]"
      type: "string"
    - name: "eviction_policy"
      description: "Specifies the eviction policy for VMs in this Scale Set; Deallocate or Delete"
      type: "string"
    - name: "gallery_application"
      description: "A Gallery Application Block"
      type: "string"
    - name: "identity"
      description: "An identity block"
      type: "block"
    - name: "patch_assessment_mode"
      description: "Specifies the mode of VM Guest Patching for the VM; AutomaticByPlatform or ImageDefault"
      default_value: "ImageDefault"
      type: "string"
    - name: "patch_mode"
      description: "Specifies the mode of in-guest patching for the VM; AutomaticByPlatform or ImageDefault"
      default_value: "ImageDefault"
      type: "string"
    - name: "max_bid_price"
      description: "The maximum price you're willing to pay for each VM in US dollars; Default -1"
      default_value: "-1"
      type: "string"
    - name: "plan"
      description: "A plan block"
      type: "block"
    - name: "platform_fault_domain"
      description: "Specifies the Platform Fault Domain in which this Linux VM should be created; Default -1"
      default_value: "-1"
      type: "string"
    - name: "priority"
      description: "The Priority of this VM; Regular or Spot; Default Regular"
      default_value: "regular"
      type: "string"
    - name: "provision_vm_agent"
      description: "Should the Azure VM Agent be provisioned on each VM; Default true"
      default_value: true
      type: "boolean"
    - name: "proximity_placement_group_id"
      description: "The ID of the Proximity Placement Group in which the VM"
      type: "string"
    - name: "secret"
      description: "One or more secret blocks"
      type: "block"
    - name: "secure_boot_enabled"
      description: "Specifies if Secure Boot and Trusted Launch is enabled for the VM"
      type: "boolean"
    - name: "source_image_id"
      description: "The ID of the image which the VM should be created from"
      type: "string"
    - name: "source_image_reference"
      description: "A source image reference block"
      type: "block"
    - name: "tags"
      description: "A mapping of tags"
      type: "list"
    - name: "termination_notification"
      description: "Termination Notification Block"
      type: "block"
    - name: "user_data"
      description: "The Base64-Encoded User Data which should be used for this VM"
      type: "string"
    - name: "vtpm_enabled"
      description: "Specifies if vTPM and Trusted Launch is enabled for the VM"
      type: "boolean"
    - name: "virtual_machine_scale_set_id"
      description: "Specifies the Orchestrated Virtual Machine Scale Set that this VM should be created within"
      type: "string"
    - name: "zone"
      description: "Specifies a list of Availability Zones in which this VM Scale Set should be located"
      type: "list"

blocks:
  - name: "additional_capabilities"
    required: false 
    description: "An Additional Capabilities Block"
    optional_vars:
      - name: "ultra_ssd_enabled"
        description: "Should the capacity to enable Data Disks of the UltraSSD_LRS storate account be supported; Default false"
        type: "boolean"
  - name: "admin_ssh_key"
    required: false
    description: "An Admin SSH Key Block"
    required_vars:
      - name: "public_key"
        description: "The Public Key which should be used for authentication, must be at least 2048-bit and in ssh-rsa format"
        type: "string"
      - name: "username"
        description: "The Username for which this Public SSH Key should be configured"
        type: "string"
  - name: "boot_diagnostics"
    required: false
    description: "A Boot Diagnostics Block"
    optional_vars:
      - name: "storage_account_uri"
        description: "The primary / secondary endpoint for the Azure Storage Account which should be used for Boot Diagnostics"
        type: "string"
  - name: "certificate"
    required: false
    parent_block: "secret"
    description: "A Certificate Block"
    required_vars:
      - name: "url"
        description: "The Secret URL of a Key Vault Certificate"
        type: "string"
  - name: "diff_disk_settings"
    required: false
    parent_block: "os_disk"
    description: "A Diif Disk Settings Block"
    required_vars:
      - name: "option"
        description: "Specifies the Ephemeral Disk Settings for the OS Disk; Possible value is Local"
        type: "string"
    optional_vars:
      - name: "placement"
        description: "Specifies where to store the Ephemeral Disk; CacheDisk or ResourceDisk; Default CacheDisk"
        type: "string"
  - name: "gallery_application"
    required: false
    description: "A Gallery Application Block"
    required_vars:
      - name: "version_id"
        description: "Specifies the Gallery Application Version resource ID"
        type: "string"
    optional_vars:
      - name: "configuration_blob_uri"
        description: "Specifies the URI to an Azure Blob that will replace the default configuration for the package if provided"
        type: "string"
      - name: "order"
        description: "Specifies the order in which the packages have to be installed"
        type: "string"
      - name: "tag"
        description: "Specifies a passthrough value for more generic context"
        type: "string"
  - name: "identity"
    required: false
    description: "An Identity Block"
    required_vars:
      - name: "type"
        description: "Specifies the type of Managed Service Identity; SystemAssigned or UserAssigned"
        type: "string"
    optional_vars:
      - name: "identity_ids"
        description: "Specifies a list of User Assigned Managed Identity IDs to be assigned to this Windows Virtual Machine Scale Set"
        type: "string"
  - name: "plan"
    required: false
    description: "A Plan Block"
    required_vars:
      - name: "name"
        description: "Specifies the name of the image from the marketplace"
        type: "string"
      - name: "publisher"
        description: "Specifies the publisher of the image"
        type: "string"
      - name: "product"
        description: "Specifies the product of the image from the marketplace"
        type: "string"
  - name: "secret"
    required: false
    description: "A Secret Block"
    required_vars:
      - name: "certificate"
        description: "One or more certificate blocks"
        type: "block"
      - name: "key_vault_id"
        description: "The ID of the Key Vault which all Secrets should be sourced"
        type: "string"
  - name: "termination_notification"
    required: false
    description: "A Termination Notification Block"
    required_vars:
      - name: "enabled"
        description: "Should the termination notification be enabled on this VM Scale Set"
        type: "boolean"
    optional_vars:
      - name: "timeout"
        description: "Length of time (in minutes, between 5 and 15) a notification to be sent to the VM; Default PT5M"
        type: "string"
  - name: "source_image_reference"
    required: false
    description: "A Source Image Reference Block"
    required_vars:
      - name: "publisher"
        description: "Specifies the publisher of the image used to create the virtual machines"
        type: "string"
      - name: "offer"
        description: "Specifies the offer of the image used to create the virtual machines"
        type: "string"
      - name: "sku"
        description: "Specifies the SKU of the image used to create the virtual machines"
        type: "string"
      - name: "version"
        description: "Specifies the version of the image used to create the virtual machines"
        type: "string"
